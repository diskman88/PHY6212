# 功能列表

1. 键盘扫描  

    键盘扫描 矩阵对照表:  

        |               | P01(C00)   | P03(C01)   | P14(C02)   | P24(C03)   | P09(C04)   | P20(C05)   | P33(C06)   | P31(C07)   | P28(C08)   |
        | :------------ | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |
        |    行(输入)    | P04(C09)   | P06(C10)   | P11(C11)   | P13(C12)   | P21(C13)   | P26(C14)   | P30(C15)   | P16(C16)   | P17(C17)   |
        | 00  P00(R00)  |            |            |            |            |            |            |            |            |            |  
        | 01  P02(R01)  |            |            |            |            |            |            |            |            |            |
        | 02  P15(R02)  |            |            |            |            |            |            |            |            |            |
        | 03  P25(R03)  |            |            |            |            |            |            |            |            |            |
        | 04  P10(R04)  |            |            |            |            |            |            |            |            |            |
        | 05  P18(R05)  |            |            |            |            |            |            |            |            |            |
        | 06  P23(R06)  |            |            |            |            |            |            |            |            |            |
        | 07  P32(R07)  |            |            |            |            |            |            |            |            |            |
        | 08  P34(R08)  |            |            |            |            |            |            |            |            |            |
        | 09  P27(R09)  |            |            |            |            |            |            |            |            |            |
        | 10  P05(R10)  |            |            |            |            |            |            |            |            |            |
        | 11  P07(R11)  |            |            |            |            |            |            |            |            |            |
        | 12  P12(R12)  |            |            |            |            |            |            |            |            |            |
        | 13  P19(R13)  |            |            |            |            |            |            |            |            |            |
        | 14  P22(R14)  |            |            |            |            |            |            |            |            |            |
        | 15  P29(R15)  |            |            |            |            |            |            |            |            |            |

    IOMUX配置

        a. IOMUX的行列使用的引脚禁止重映射FULL_MUX0,FULL_MUX1  
        b. 使能引脚的KEYSCAN输入功能KEYSCAN_IN_EN(0x4000_384C)  
        c. 使能引脚的KEYSCAN输出功能KEYSCAN_OUT_EN(0x4000_3850)

    KEYSCAN配置:

        a. 配置KEYSCAN的参数:
            去抖动时间
            扫描极性
            是否自动扫描
            是否忽略多键
            列输出使能(0-17)
            中断使能
            按键扫描使能
        b. 行输入使能(0-15)

    低功耗处理

        进入低功耗
            a. KEYSCAN清除所有配置
            b. IOMUX关闭矩阵行列的引脚连接到KEYSCAN
            c. IOMUX配置列引脚为强上拉,行引脚为下拉
            d. IOMUX配置行引脚连接到GPIO
            e. 从GPIO读取行引脚的当前输入状态,根据引脚的电平状态,配置为行引脚为上升沿(低电平)/下降沿(高电平)唤醒
            f. 保存当前的行输入状态
        退出低功耗
            a. IOMUX配置列引脚为强上拉,行引脚为下拉
            b. IOMUX配置行引脚连接到GPIO
            c. 从GPIO读取行引脚的当前输入状态,与保存前的状态对比,如不一致则为按键唤醒,继续处理,否则退出
            d. 禁止进入低功耗状态
            e. 清除列引脚的强上拉状态,设置为下拉
            f. 重新配置KEYSCAN
2. 红外发码

    第一件事

        a. 1
        b. 2
    第二件事

        a. 1
        b. 2
3. 蓝牙相关
4. 语音
5. OTA
